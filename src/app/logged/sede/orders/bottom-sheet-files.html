<div fxLayoutAlign="center stretch" class="pt-1" style="position: sticky; top: 0; background-color: white; z-index: 2;">
   <h2 class="text-secondary">
      Detalles del pedido
      <span class="text-secondary">
         #{{this.order.id}}
      </span>
   </h2>
</div>
<div class="my-4">
   <div>
      <h4 class="text-secondary">Estado:
         <span class="text-secondary-darker">
            {{this.order.state.name}}
         </span>
      </h4>
   </div>
   <mat-accordion>
      <mat-expansion-panel *ngFor="let orderFile of this.order.orderFiles; let i=index">
         <mat-expansion-panel-header>
            <mat-panel-description>
               <span>
                  <span [ngClass]="{'text-primary': orderFile.state.id == FILE_STATES.POR_IMPRIMIR}">
                     {{ orderFile.state.name }}
                  </span>
                  - {{orderFile.file.name | titlecase}}
                  <b> </b>
                  <span class="text-secondary">
                     ({{orderFile.file.course.name}})
                  </span>
               </span>
            </mat-panel-description>
         </mat-expansion-panel-header>
         <div class="ml-5 text-secondary-darker" fxLayout="column">
            <div fxLayout="row">
               <div fxLayout="column" fxFlex="50">
                  <p fxLayoutAlign="start center">
                     <mat-icon color="primary">keyboard_arrow_right</mat-icon> {{ orderFile.configuration.doubleFace ?
                     "Simple faz" : "Doble faz" }}
                  </p>
                  <p fxLayoutAlign="start center">
                     <mat-icon color="primary">keyboard_arrow_right</mat-icon>Diapositivas por hoja: {{
                     orderFile.configuration.slidesPerSheet }}
                  </p>
                  <p fxLayoutAlign="start center" *ngIf="!!orderFile.configuration.fromUntil">
                     <mat-icon color="primary">keyboard_arrow_right</mat-icon>Páginas: {{
                     orderFile.configuration.fromUntil }}
                  </p>
                  <p fxLayoutAlign="start center" *ngIf="!!orderFile.configuration.color">
                     <mat-icon color="primary">keyboard_arrow_right</mat-icon>Color {{ orderFile.configuration.color ?
                     "✔" : "✘" }}
                  </p>
               </div>
               <h2 fxFlex="50" fxLayoutAlign="center center" class="text-secondary">
                  $
                  <h5 class="ml-2">
                     {{orderFile.price}}
                  </h5>
               </h2>
            </div>
            <div class="separator separator-center mt-1">
               <mat-icon class="text-secondary">print</mat-icon>
            </div>
            <div fxLayout="row" class="mt-2">
               <div fxFlex="60" fxLayoutAlign="start center">
                  <button [color]="'accent'" *ngIf="orderFile.state.id == FILE_STATES.IMPRESO; else spanPorImprimir"
                     mat-button (click)="onChangeFileState(order.id, orderFile.id,FILE_STATES.POR_IMPRIMIR)">
                     Por imprimir
                  </button>
                  <ng-template #spanPorImprimir>
                     <span class="text-secondary mr-2">
                        Por imprimir
                     </span>
                  </ng-template>

                  <mat-icon class="text-secondary"
                     [ngStyle]="{'transform': orderFile.state.id == FILE_STATES.IMPRESO ? 'rotate(180deg)' : ''}">
                     label_important</mat-icon>
                  <button *ngIf="orderFile.state.id == FILE_STATES.POR_IMPRIMIR; else spanImpreso" mat-button
                     [color]="'accent'" (click)="onChangeFileState(order.id, orderFile.id,FILE_STATES.IMPRESO)">
                     Imprimir
                  </button>
                  <ng-template #spanImpreso>
                     <span class="text-secondary ml-2">
                        Impreso
                     </span>
                  </ng-template>
               </div>
               <div fxFlex="40" fxLayoutAlign="center center">
                  <button mat-icon-button class="text-accent">
                     <mat-icon>open_in_new</mat-icon>
                     <!-- Abrir archivo -->
                  </button>
               </div>
            </div>
         </div>
      </mat-expansion-panel>
      <!-- Anillados -->
      <mat-expansion-panel *ngFor="let ringed of this.ringedGroups; let i=index">
         <mat-expansion-panel-header>
            <mat-panel-description>
               <span>
                  <b>
                     {{ringed.state.name}} - {{ ringed.name | titlecase}}
                  </b>
               </span>
            </mat-panel-description>
         </mat-expansion-panel-header>
         <div class="ml-5 text-secondary-darker">
            <mat-list dense>
               <mat-list-item *ngFor="let fileRinged of ringed.files; let i=index">
                  <b class="text-secondary">
                     {{i+1 + '° &nbsp;'}}
                  </b>
                  <span class="text-secondary-darker"> <b>{{fileRinged.name}}</b> &nbsp; ({{fileRinged.course}}) </span>
               </mat-list-item>
            </mat-list>
            <div class="separator separator-center mt-1">
               <mat-icon class="text-secondary">check_circle_outline</mat-icon>
            </div>

            <div fxLayoutAlign="center center">
               <button [color]="'accent'" *ngIf="ringed.state.id == RING_STATES.ANILLADO; else spanPorAnillar"
                  mat-button (click)="onChangeRingState(order.id, ringed.id, RING_STATES.POR_ANILLAR)">
                  Por anillar
               </button>
               <ng-template #spanPorAnillar>
                  <span class="text-secondary mr-2">
                     Por anillar
                  </span>
               </ng-template>

               <mat-icon class="text-secondary"
                  [ngStyle]="{'transform': ringed.state.id == RING_STATES.ANILLADO ? 'rotate(180deg)' : ''}">
                  label_important</mat-icon>
               <button *ngIf="ringed.state.id == RING_STATES.POR_ANILLAR; else spanAnillado" mat-button
                  [color]="'accent'" (click)="onChangeRingState(order.id, ringed.id, RING_STATES.ANILLADO)">
                  Anillar
               </button>
               <ng-template #spanAnillado>
                  <span class="text-secondary ml-2">
                     Anillado
                  </span>
               </ng-template>
            </div>

         </div>
      </mat-expansion-panel>
   </mat-accordion>
</div>
<!-- <cei-alert-error #alertError></cei-alert-error> -->